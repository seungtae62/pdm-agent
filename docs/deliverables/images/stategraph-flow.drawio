<mxfile host="app.diagrams.net" modified="2026-02-19" type="device">
  <diagram name="StateGraph Flow" id="stategraph-flow">
    <mxGraphModel dx="1200" dy="900" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1169" pageHeight="827" math="0" shadow="0">
      <root>
        <mxCell id="0"/>
        <mxCell id="1" parent="0"/>

        <!-- ============ NODES ============ -->

        <!-- START -->
        <mxCell id="start" value="START" style="ellipse;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=14;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="370" y="30" width="100" height="45" as="geometry"/>
        </mxCell>

        <!-- load_memory -->
        <mxCell id="load_memory" value="load_memory" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="345" y="120" width="150" height="50" as="geometry"/>
        </mxCell>

        <!-- reasoning (강조) -->
        <mxCell id="reasoning" value="reasoning" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=14;fontStyle=1;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="345" y="240" width="150" height="50" as="geometry"/>
        </mxCell>

        <!-- tool_executor -->
        <mxCell id="tool_executor" value="tool_executor&lt;br&gt;&lt;font style=&quot;font-size:11px;&quot;&gt;(MCP Client)&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="80" y="340" width="150" height="50" as="geometry"/>
        </mxCell>

        <!-- parse_diagnosis -->
        <mxCell id="parse_diagnosis" value="parse_diagnosis" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="345" y="410" width="150" height="50" as="geometry"/>
        </mxCell>

        <!-- generate_report -->
        <mxCell id="generate_report" value="generate_report" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="345" y="520" width="150" height="50" as="geometry"/>
        </mxCell>

        <!-- generate_work_order (조건부 실행) -->
        <mxCell id="generate_work_order" value="generate_work_order" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=13;dashed=1;dashPattern=8 4;" vertex="1" parent="1">
          <mxGeometry x="345" y="630" width="150" height="50" as="geometry"/>
        </mxCell>

        <!-- save_memory -->
        <mxCell id="save_memory" value="save_memory" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="345" y="740" width="150" height="50" as="geometry"/>
        </mxCell>

        <!-- END -->
        <mxCell id="end" value="END" style="ellipse;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=14;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="370" y="840" width="100" height="45" as="geometry"/>
        </mxCell>

        <!-- ============ EDGES ============ -->

        <!-- START → load_memory -->
        <mxCell id="e1" style="edgeStyle=orthogonalEdgeStyle;rounded=1;" edge="1" source="start" target="load_memory" parent="1">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- load_memory → reasoning -->
        <mxCell id="e2" style="edgeStyle=orthogonalEdgeStyle;rounded=1;" edge="1" source="load_memory" target="reasoning" parent="1">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- reasoning → tool_executor (call_tool) -->
        <mxCell id="e3" value="call_tool" style="edgeStyle=orthogonalEdgeStyle;rounded=1;fontSize=11;fontStyle=2;exitX=0;exitY=0.75;exitDx=0;exitDy=0;entryX=1;entryY=0;entryDx=0;entryDy=0;" edge="1" source="reasoning" target="tool_executor" parent="1">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- tool_executor → reasoning (loop back) -->
        <mxCell id="e4" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;entryX=0;entryY=0.25;entryDx=0;entryDy=0;exitX=0;exitY=0;exitDx=0;exitDy=0;" edge="1" source="tool_executor" target="reasoning" parent="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="40" y="340"/>
              <mxPoint x="40" y="253"/>
            </Array>
          </mxGeometry>
        </mxCell>

        <!-- reasoning → reasoning (continue_reasoning, self-loop) -->
        <mxCell id="e5" value="continue_reasoning" style="rounded=1;fontSize=11;fontStyle=2;exitX=1;exitY=0.25;exitDx=0;exitDy=0;entryX=1;entryY=0.75;entryDx=0;entryDy=0;curved=1;" edge="1" source="reasoning" target="reasoning" parent="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="560" y="253"/>
              <mxPoint x="560" y="278"/>
            </Array>
          </mxGeometry>
        </mxCell>

        <!-- reasoning → parse_diagnosis (generate_report) -->
        <mxCell id="e6" value="generate_report" style="edgeStyle=orthogonalEdgeStyle;rounded=1;fontSize=11;fontStyle=2;" edge="1" source="reasoning" target="parse_diagnosis" parent="1">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- parse_diagnosis → generate_report -->
        <mxCell id="e7" style="edgeStyle=orthogonalEdgeStyle;rounded=1;" edge="1" source="parse_diagnosis" target="generate_report" parent="1">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- generate_report → generate_work_order (Warning/Critical) -->
        <mxCell id="e8" value="Warning / Critical" style="edgeStyle=orthogonalEdgeStyle;rounded=1;fontSize=11;fontColor=#b85450;" edge="1" source="generate_report" target="generate_work_order" parent="1">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- generate_work_order → save_memory -->
        <mxCell id="e9" style="edgeStyle=orthogonalEdgeStyle;rounded=1;" edge="1" source="generate_work_order" target="save_memory" parent="1">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- generate_report → save_memory (Normal/Watch, skip work_order) -->
        <mxCell id="e10" value="Normal / Watch" style="edgeStyle=orthogonalEdgeStyle;rounded=1;fontSize=11;dashed=1;dashPattern=8 4;fontColor=#666666;exitX=1;exitY=1;exitDx=0;exitDy=0;entryX=1;entryY=0;entryDx=0;entryDy=0;" edge="1" source="generate_report" target="save_memory" parent="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="580" y="570"/>
              <mxPoint x="580" y="740"/>
            </Array>
          </mxGeometry>
        </mxCell>

        <!-- save_memory → END -->
        <mxCell id="e11" style="edgeStyle=orthogonalEdgeStyle;rounded=1;" edge="1" source="save_memory" target="end" parent="1">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- ============ NOTES ============ -->

        <!-- 안전장치 노트 -->
        <mxCell id="note_safety" value="⚠ 안전장치&lt;br&gt;tool_calls_count &amp;gt; 10이면&lt;br&gt;강제 parse_diagnosis 전이" style="shape=note;whiteSpace=wrap;html=1;size=14;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=11;align=left;spacingLeft=8;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="80" y="430" width="200" height="55" as="geometry"/>
        </mxCell>

        <!-- 안전장치 → parse_diagnosis 점선 -->
        <mxCell id="e_note1" style="edgeStyle=orthogonalEdgeStyle;dashed=1;dashPattern=4 4;strokeColor=#d6b656;entryX=0;entryY=0.5;entryDx=0;entryDy=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" edge="1" source="note_safety" target="parse_diagnosis" parent="1">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- 조건부 실행 노트 -->
        <mxCell id="note_cond" value="조건부 실행&lt;br&gt;Warning/Critical만 실행&lt;br&gt;Normal/Watch는 건너뜀" style="shape=note;whiteSpace=wrap;html=1;size=14;fillColor=#f8cecc;strokeColor=#b85450;fontSize=11;align=left;spacingLeft=8;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="80" y="625" width="195" height="55" as="geometry"/>
        </mxCell>

        <!-- 조건부 노트 → generate_work_order 점선 -->
        <mxCell id="e_note2" style="edgeStyle=orthogonalEdgeStyle;dashed=1;dashPattern=4 4;strokeColor=#b85450;entryX=0;entryY=0.5;entryDx=0;entryDy=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" edge="1" source="note_cond" target="generate_work_order" parent="1">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- 범례 -->
        <mxCell id="legend_box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=none;strokeColor=#999999;dashed=1;dashPattern=8 4;" vertex="1" parent="1">
          <mxGeometry x="680" y="30" width="220" height="130" as="geometry"/>
        </mxCell>
        <mxCell id="legend_title" value="범례" style="text;html=1;fontSize=12;fontStyle=1;align=left;verticalAlign=middle;" vertex="1" parent="1">
          <mxGeometry x="700" y="35" width="60" height="25" as="geometry"/>
        </mxCell>
        <mxCell id="legend1" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="700" y="65" width="30" height="20" as="geometry"/>
        </mxCell>
        <mxCell id="legend1_text" value="ReAct 추론 핵심 노드" style="text;html=1;fontSize=11;align=left;verticalAlign=middle;" vertex="1" parent="1">
          <mxGeometry x="740" y="65" width="140" height="20" as="geometry"/>
        </mxCell>
        <mxCell id="legend2" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="700" y="95" width="30" height="20" as="geometry"/>
        </mxCell>
        <mxCell id="legend2_text" value="처리 노드" style="text;html=1;fontSize=11;align=left;verticalAlign=middle;" vertex="1" parent="1">
          <mxGeometry x="740" y="95" width="140" height="20" as="geometry"/>
        </mxCell>
        <mxCell id="legend3" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;dashed=1;dashPattern=8 4;" vertex="1" parent="1">
          <mxGeometry x="700" y="125" width="30" height="20" as="geometry"/>
        </mxCell>
        <mxCell id="legend3_text" value="조건부 실행 노드" style="text;html=1;fontSize=11;align=left;verticalAlign=middle;" vertex="1" parent="1">
          <mxGeometry x="740" y="125" width="140" height="20" as="geometry"/>
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
