### 프로젝트 명

지능화 플랫폼 기반 예지보전 AI Agent 개발

### 배경 및 문제 정의

* 현재 상황 (As-Is):

    * 제조 현장의 설비 유지보수가 **사후 정비 및 주기적 예방 정비&#x20;**&#xBC29;식으로 운영됨

    * 센서 데이터를 수집하나, **단순 모니터링 및 임계값 기반 알람 방식**

    * 설비 이상 발생 시, **원인 분석에 시간이 소요되며 숙련된 엔지니어 경험**에 의존 (분석 요청 VoC 작업 등)

    * 작업지시서 작성 등 **후속 조치가 수동**으로 이루어짐

* Pain Point:

    * 시간: 이상 감지 > 원인 분석 > 조치까지 수동 작업으로 과다 소요

    * 비용: 예기치 못한 고장으로 비계획 정지 비용 발생

* 기회 요인:

    * AI-Agent/LLM 기술을 통한 이상 탐지, 원인 분석, 자연어 기반 문서 생성 가능

    * Edge 시스템의 정량 분석과 LLM의 도메인 지식 기반 해석을 결합하여, 엔지니어 수준의 판단을 자동화

    * 오픈 데이터셋 활용으로 초기 개발 및 검증 가능

### 목표 사용자 (Target User)

* 설비 엔지니어: 설비 상태 모니터링, 이상 알림 수신, 에이전트 분석 결과 확인, 작업 지시서 검토

* 설비 관리자: 고장 예측 리포트 기반 정비 우선순위 결정

### 프로젝트 목표

* 정성적 목표

    * 목표 1: Edge 시스템의 이상 감지 알람 수신부터, 도메인 지식 기반 이상 해석, RUL 예측 평가, 근분 원인 추론, 정비 권고 생성까지 E2E 에이전트화

    * 목표 2: 정량 분석(Edge)과 전문가 수준 해석(Agent)의 역할 분리를 통해, 신뢰성 있는 데이터 기반 의사결정 지원

* 정량적 목표 (KPI)

| **성과 지표**    | **목표 수치** | **측정 방법**                                                                                         | **현재 수준**                          |
| ------------ | --------- | ------------------------------------------------------------------------------------------------- | ---------------------------------- |
| 고장 유형 진단 정확도 | 85% 이상    | 에이전트가 진단한 고장 유형 (외륜, 내륜, 전동체 등)과 NASA-IMS 실제 고장 유형의 일치율 | 미측정 (3개의 테스트 셋의 고장 모드를 기준으로 초기 평가) |
| 추론 근거 설명 품질   | 4점/5점 이상 | 전문가 정성 평가 - 추론 근거의 논리성, 도메인 지식 활용도, 불확실성 표현 적절성                                  | 미측정                                |
| Tool 호출 효율성    | 정성 평가     | 불필요한 Tool 호출 없이 상황에 적절한 Tool만 호출했는지 평가 (정상 시 Tool 미호출, 심각 시 Deep Research 발동 등) | 미측정                                |

### 핵심 기능 정의

1. 결함 유형 식별: Edge에서 전달받은 주파수 영역 데이터 (결함 특성 주파수 진폭, 고조파, 사이드밴드)를 도메인 지식에 비추어 결함 유형을 판별
    - 어떤 종류의 결함인지 (외륜, 내륜, 전동체, 복합 결함 등)
    - 에이전트가 직접 수치 계산은 수행하지 않으며, Edge 산출 주파수 특성값을 도메인 지식 기준으로 해석

2. 결함 진행 단계 판단 및 열화 속도 평가: 시간 영역 특징량 (RMS, Kurtosis, Crest Factor)과 주파수 영역 특징량을 종합하여 현재 결함 위치를 판단하고, Edge가 산출한 추세 데이터를 해석하여 열화 속도를 평가

3. RUL 예측 평가: ML모델이 산출한 RUL 예측값과 신뢰구간을 맥락적으로 평가
    - 에이전트가 직접 RUL 연산을 하지 않으며, ML 모델의 예측을 비판적으로 해석
    - 신뢰구간 폭을 통한 예측 불확실성 평가

4. 종합 판단 및 정비 권고 생성: 앞선 분석 결과를 종합하여 위험도를 결정하고, 정비 권고를 생성하며, 정비 담당자와 대화형으로 상호작용

5. 분석 리포트 생성: 심층 조사 결과 및 종합 판단을 구조화된 분석 리포트 (분석 요약, 근거 데이터, 권고 조치, 불확실성 고지 포함) 형태로 생성하여 제공

6. 작업지시서 생성: 분석 리포트를 기반으로 정비 절차, 필요 자원, 권장 일정, 안전 주의사항을 포함한 작업지시서를 생성하여 제공 (Warning/Critical 위험도에서 생성)

### 에이전트 상세 설계

#### 연산과 해석의 분리

| 구분 | Edge 시스템                                                       | PdM Agent                                      |
| -- | -------------------------------------------------------------- | ---------------------------------------------- |
| 역할 | HI(Health Index: RMS, FFT Energy 등), 추세선 기울기 계산 등 모든 정량적 연산 수행 | Edge 산출 값을 읽고, 도메인 지식에 기반하여 의미를 해석             |
| 성격 | 계산 정확성, 실시간성                                                   | 맥락적 판단, 전문가 수준 해석                              |
| 예시 | slope = 0.15 RUL = 0.78 anomaly_detected = true                | 열화 속도가 일반적 수준보다 비정상적으로 빠르며, 외부 요인 개입 가능성이 존재함. |

#### 에이전트 기능 구성

| 기능                           | 설명                                                                                                                                                                              | 적용                                                                                                                        |
| ---------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------- |
| ReAct (Planning & Reasoning) | 이벤트 페이로드 수신 시 상황에 따른 추론 깊이와 경로를 자율적으로 결정. 정상 상태에서는 간결하게 조기 종료하고, 복잡한 이상 상황에서는 심층 추론을 수행.                                                                                        | ReAct (Reasoning + Acting) 프레임워크 기반. 5단계 추론 구조 (결함 식별 > 단계 판정 > 열화 평가 > RUL 평가 > 종합 판단)을 따르되, 각 단계에서 분기/종료/Tool 호출을 자율 결정 |
| Deep Research                | 비정상적 이상 이벤트에 대해, 단일 추론으로 끝내지 않고, 정비 이력 DB, 설비 매뉴얼 DB, 과거 분석 이력 등 다수의 소스를 반복적으로 탐색하며 근본 원인을 심층적으로 조사. 검색 > 해석 > 후속 질문 생성 > 재검색 루프를 자율적으로 수행하며, 단순 RAG 검색 대비 심층적이고 구조화된 분석 결과를 도출 | 검색 깊이와 반복 횟수는 에이전트가 자율 판단                                                                                                 |
| Memory                       | 대화 세션 내 맥락을 유지하고, 과거 분석 결과와 사용자 피드백을 축적하여 후속 판단에 활용                                                                                                                             | 단기: 현재 대화 세션의 분석 컨텍스트 유지 장기: 에이전트 과거 분석 판단과 결과를 분석 이력 DB에 저장하여, 향후 유사 이벤트 발생 시 참조                                         |
| RAG                          | 정비 이력 DB, 설비 매뉴얼 DB, 과거 분석 이력 DB에서 관련 정보를 검색하여 해석의 근거를 보강.                                                                                                                      | VDB 기반. MCP를 통해 호출되며, 검색 결과를 추론 컨텍스트에 반영                                                                                  |
| Prompt Optimization          | 대화형 상호작용 시 분석 맥락을 효율적으로 유지. 전체 추론 체인 대신 핵심 필드만 추출하여 주입하고, 대화가 길어지면 이력을 압축하여 응답 품질 유지                                                                                                  | 분석 맥락 구조화 (세션 시작 시) + 대화 이력 압축 (매 턴) + 슬라이딩 윈도우 (3턴 이상 시)                                                              |

#### 에이전트 베어링 도메인 지식 체계

1. 베어링 결함 주파수 해석: 외륜(BPFO), 내륜(BPFI), 전동체(BSF)

2. Feature 복합 해석:
    - Kurtosis 상승 + RMS 안정: 간헐적 충격 발생
    - Kurtosis 상승 + RMS 상승: 결함 진행 중
    - Kurtosis 감소 + RMS 급상승: 결함 말기 (충격 > 지속 진동 전이)
    - Crest Factor 상승 후 감소: 초기에서 결함 진행기로 전이
    - 고주파 에너지 증가: 결함 최초 지표

### 기대 효과

* 업무 효율화: 이상 감지 후, 도메인 지식 기반 해석 > 근본 원인 추론 > 정비 권고 생성까지 처리시간 90% 이상 단축

* 비용 절감: 예지보전을 통한 비계획 다운타임 감소

* 의사결정 품질 향상: 연산과 해석 역할 분리를 통해, 정량적 근거와 전문가 수준 판단이 결함된 신뢰성 있는 정비 의사결정 지원

### 범위 및 제약사항

* In Scope:

| **구분**   | **내용**                                                                                          |
| -------- | ----------------------------------------------------------------------------------------------- |
| 전제 조건    | Edge 시스템이 이상 감지 및 정량 분석 (특징량 산출, 추세 계산, RUL 예측 등)을 수행하여 이벤트 페이로드를 생성한 상황 가정                     |
| 핵심 개발    | 이벤트 페이로드 기반 도메인 지식 해석, 결함 유형 식별, 진행 단계 판정, RUL 평가, 정비 권고 생성, 사용자 질의응답                           |
| Agent 기능 | 1. 결함 유형 식별 2. 결함 진행 단계 판정 및 열화 속도 평가 3. RUL 맥락 평가 4. 위험도 종합 판단 및 정비 권고 생성 5. 정비 담당자와 대화형 상호 작용 6. 작업지시서 생성 |
| 데이터      | IMS Bearing 데이터 셋 + 지능화 플랫폼 Edge Computing (Rule + ML/DL + RUL)                                 |
| UI       | Streamlit 기반 데모 UI (분석 결과 확인, 정비 권고 검토 기능, 정비 담당자 대화 상호 작용)                                       |
| 외부 연동    | 1. Mock Edge 이벤트 페이로드 2. 정비 이력 VDB 3. 설비 매뉴얼 VDB 4. 분석 이력 VDB                                   |

* Out of Scope:

| **구분**        | **내용**                   | **비고**               |
| ------------- | ------------------------ | -------------------- |
| 이상 탐지 / 예측 모델 | ML/DL 기반 이상 탐지 모델 개발     | Edge 시스템 기존 모델 존재 가정 |
| 정량적 연산        | RMS, FFT, 통계량 산출, 추세선 계산 | Edge 시스템 담당          |
| 실시간 처리        | 스트리밍 기반 실시간 분석           | 배치 방식                |
| 실 시스템 연동      | MES, CMMS, ERP 연동        | Mock API 대체          |
| 현장 센서 연동      | 실제 설비 센서 데이터 수집          | 오픈 데이터셋 사용           |
| 다설비 확장        | 베어링 외 다른 설비 유형           | 단일 설비(베어링)           |
| Edge 배포       | 현장 디바이스 배포               | 서버 기반 데모             |

* 제약사항:

| **구분**   | **내용**                                    |
| -------- | ----------------------------------------- |
| 데이터 제약   | 오픈 데이터셋 사용으로 실제 현장 데이터와 차이 존재             |
| 알람 입력    | Edge 이벤트 페이로드 형식을 사전 정의하여 Mock 데이터로 시뮬레이션 |
| 유사 사례 DB | PoC 단계에서는 샘플 사례 수동 구축                     |
| 환경적 제약   | 기존 플랫폼 UI 및 시스템 연동 고려                     |

### 오픈 데이터셋 설명

* IMS Bearing (<https://data.nasa.gov/dataset/ims-bearings>)

* Sampling Rate: 20kHz / 10분 간격 수집

| **Test Dataset** | **설명**                                                                     |
| ---------------- | -------------------------------------------------------------------------- |
| Dataset #1       | 2003.10.22 - 2003.11.25 (약 35일) Bearing 3에서 내륜 결함 발생 Bearing 4에서 전동체 결함 발생 |
| Dataset #2       | 2004.2.12 - 2004.2.19 (약 7일) Bearing 1에서 외륜 결함 발생                          |
| Dataset #3       | 2004.x.xx (약 30일) Bearing 3에서 외륜 결함 발생                                     |
