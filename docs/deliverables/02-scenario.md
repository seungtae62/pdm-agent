### 핵심 사용자 시나리오

#### 시나리오 1: 베어링 점진적 열화 감지 및 추적

> 각 시점 개별 분석 (시점A: 5일차 정상 구간 / 시점B: 15일차 의심 전이 구간 / 시점C: 2일차 결함 진행 구간)

**시나리오 1-A: 점진적 열화 감지 및 추적 - 정상구간**

* ID : [SC-001]

* 상황 : 설비에서 수집된 센서 데이터가 정상 구간이며 정기 모니터링 보고

* 목표 : 에이전트가 ReAct 추론 Thought 1에서 정상 상태를 확인하고 간결한 응답 후 조기 종료

* 데이터셋: Dataset #1, Bearing 3 - 내륜 결함 (5일차 정상 구간)

* 사전 조건 :

    * 센서 데이터 정상 실시간 수집 및 전처리

    * Edge 시스템이 이상 감지 및 정량 분석을 수행하여 이벤트 페이로드 생성

    * Memory에 해당 설비의 이전 판단 이력 없음

* 상세 흐름

| 단계 | 사용자 행동 | 시스템 동작                                                                               | 기술 구성 요소       | 비고                       |
| -- | ------ | ------------------------------------------------------------------------------------ | -------------- | ------------------------ |
| 1  | -      | 센서 데이터 실시간 수집 및 전처리                                                                  | Edge 시스템       | 실시간 스트리밍                 |
| 2  | -      | 정량 분석 수행 - Feature 산출, 추세 연산 후 이벤트 페이로드 생성                                           | Edge 시스템       | anomaly_detected = false |
| 3  | -      | Memory에서 해당 설비 이전 판단 이력 조회                                                           | Memory (장기)    | 이력 없음 확인                 |
| 4  | -      | ReAct Thought 1: anomaly_detected = false 확인. 현재 특징량을 도메인 지식 기준으로 교차 확인하여 정상 범위 내 판정 | ReAct + 도메인 지식 | 정상 > 추론 조기 종료            |
| 5  | -      | 정상 상태 간결 응답 생성                                                                       | ReAct          | Bearing 3 현재 상태 정상       |
| 6  | -      | Memory에 판단 결과 저장 (정상, Normal)                                                        | Memory (장기)    |                          |

* 기대 출력

    * 에이전트가 Thought 1에서 정상 판정 후 추론 조기 종료

    * Memory에 정상 판정 이력 저장

**시나리오 1-B: 점진적 열화 감지 및 추적 - 의심 전이 구간**

* ID : [SC-002]

* 상황 : 설비에서 수집된 센서 데이터가 의심 전이 구간으로 초기 이상 징후 감지

* 목표 : 에이전트가 ReAct 추론을 통해 결함 유형 식별, 진행 단계 판정, 열화 속도 평가, RUL 평가를 수행하고, 현 단계에서는 즉시 정비는 불필요하나 모니터링 강화 권고

* 데이터셋: Dataset #1, Bearing 3 - 내륜 결함 (15일차 의심 전이 구간)

* 사전 조건 :

    * 센서 데이터 정상 실시간 수집 및 전처리

    * Edge 시스템이 이상 감지 결과 및 정량 분석 데이터를 이벤트 페이로드로 전달

    * Memory에 SC-001 (5일차 정상 판정) 이력 존재

* 상세 흐름

| 단계 | 사용자 행동 | 시스템 동작                                                                                          | 기술 구성 요소                | 비고                      |
| -- | ------ | ----------------------------------------------------------------------------------------------- | ----------------------- | ----------------------- |
| 1  | -      | 센서 데이터 실시간 수집 및 전처리                                                                             | Edge 시스템                | 실시간 스트리밍                |
| 2  | -      | 정량 분석 수행 - Feature 산출, 추세 연산 후 이벤트 페이로드 생성                                                      | Edge 시스템                | anomaly_detected = true |
| 3  | -      | Memory에서 해당 설비 이전 판단 이력 조회                                                                      | Memory (장기)             | 5일차 이력 확인               |
| 4  | -      | ReAct Thought 1: anomaly_detected = true 확인. 주파수 영역에서 BPFI 진폭 상승 식별, 사이드 밴드 미약. 내륜 결함 초기 징후로 판별 | ReAct + 도메인 지식          | 결함 유형 식별                |
| 5  | -      | ReAct Thought 2: Kurtosis 상승 시작 + RMS 소폭 상승 확인. Memory의 5일차 정상 대비 변화 확인.                        | ReAct + 도메인 지식 + Memory | 결함 진행 단계 판정             |
| 6  | -      | ReAct Thought 3: Edge 추세 데이터 (slope, trend_direction) 해석. 열화 속도 정상 범위 내 판단.                     | ReAct + 도메인 지식          | 비정상 가속 아님               |
| 7  | -      | ReAct Thought 4: RUL 예측값과 에이전트 단계 판정 일관성 확인.                                                    | ReAct + Memory          | RUL 예측 평가               |
| 8  | -      | ReAct Thought 5: 위험도 판정. 모니터링 강화 권고                                                             | ReAct                   | 종합 판단                   |
| 9  | -      | Memory에 판단 결과 저장 (내륜 결함 초기, Watch)                                                              | Memory (장기)             |                         |

* 기대 출력

    * 결함 유형: 내륜 결함 초기 징후

    * 현재 단계: BPFI 성분 증가 관찰, Kurtosis 상승 시작

    * 열화 속도: 정상 범위 내, 가속 열화 미관찰

    * 위험도: Watch

    * Memory에 5일차 정상 대비 10일간 Kurtosis 및 BPFI 진폭 상승 추세 확인

**시나리오 1-C: 점진적 열화 감지 및 추적 - 결함 진행 구간**

* ID : [SC-003]

* 상황 : 설비에서 수집된 센서 데이터가 결함 진행 구간으로 명확한 이상 상태 감지

* 목표 : 에이전트가 ReAct 전체 추론 수행 후, Deep Research를 통해 과거 유사 사례를 심층 탐색하고, 정비 권고 및 분석 리포트를 생성

* 데이터셋: Dataset #1, Bearing 3 - 내륜 결함 (25일차 결함 진행 구간)

* 사전 조건 :

    * 센서 데이터 정상 실시간 수집 및 전처리

    * Edge 시스템이 이상 감지 결과 및 정량 분석 데이터를 이벤트 페이로드로 전달

    * Memory에 SC-001 (5일차 정상 판정), SC-002 (15일차 Watch, 내륜 결함 초기) 이력 존재

* 상세 흐름

| 단계 | 사용자 행동      | 시스템 동작                                                                                                                                                            | 기술 구성 요소                | 비고                        |
| -- | ----------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------- | ------------------------- |
| 1  | -           | 센서 데이터 실시간 수집 및 전처리                                                                                                                                               | Edge 시스템                | 실시간 스트리밍                  |
| 2  | -           | 정량 분석 수행 - Feature 산출, 추세 연산 후 이벤트 페이로드 생성                                                                                                                        | Edge 시스템                | anomaly_detected = true   |
| 3  | -           | Memory에서 해당 설비 이전 판단 이력 조회                                                                                                                                        | Memory (장기)             | 5일차 정상 + 15일차 Watch 이력 확인 |
| 4  | -           | ReAct Thought 1: anomaly_detected = true 확인. 주파수 영역에서 BPFI 진폭 상승 식별, 고주파 진동 출현, 1X 간격 사이드 밴드 확인. 내륜 결함 진행 확인.                                                     | ReAct + 도메인 지식          | 결함 유형 재확인                 |
| 5  | -           | ReAct Thought 2: Kurtosis 상승 + RMS 상승 확인. Memory의 15일차 대비 진행 확인.                                                                                                  | ReAct + 도메인 지식 + Memory | 10일단 2단계 > 3단계 상승 확인      |
| 6  | -           | ReAct Thought 3: Edge 추세 데이터 해석. 열화 속도가 정상 범위 내인지 확인.                                                                                                             | ReAct + 도메인 지식          | 열화 속도 평가                  |
| 7  | -           | ReAct Thought 3: 정비 권고의 구체성을 높이기 위해 Deep Research 발동. search_maintenance_history로 유사 내륜 결함 사례 검색 > 결과 해석 > search_analysis_history로 과거 유사 분석 판단 이력 검색 > 해당 사례 고장까지 소요 시간 검색 > search_equipment_manual 정비 절차 확인 | Deep Research           | 검색 > 해석 > 후속 질문 > 재검색 루프  |
| 8  | -           | ReAct Thought 4: RUL 예측값과 에이전트 판정 대조. Memory의 이전 RUL 추이 참조하여 분석 수행 후 가속 열화 판단.                                                                                    | ReAct + Memory          | RUL 예측 평가                 |
| 9  | -           | ReAct Thought 5: 위험도 Warning 판정. Deep Research 결과를 반영한 정비 권고 생성 (권고 조치, 시기, 근거)                                                                                   | ReAct                   | 종합 판단                     |
| 10 | -           | 분석 리포트 생성: 추론 체인 + Memory 이력 + Deep Research 결과를 정형화된 리포트로 작성 작업지시서 생성: 분석 리포트를 기반으로 현재 가진 Resouce를 기반으로 작업지시서 생성                                                 | File Generation         | Warning > 리포트 생성          |
| 11 | -           | Memory에 판단 결과 저장 (내륜 결함 3단계, RUL 평가, 권고 내용)                                                                                                                       | Memory (장기)             |                           |
| 12 | 대시보드 알림 확인  | 분석 결과 UI 표시: 결함 유형, 단계, 상세 근거, RUL 평가                                                                                                                             |                         |                           |
| 13 | 분석 리포트 다운로드 | 분석 리포트 파일 생성 및 제공                                                                                                                                                 |                         |                           |
| 14 | 작업 지시서 다운로드 | 작업 지시서 파일 생성 및 제공                                                                                                                                                 |                         |                           |

* 기대 출력

    * 결함 유형: 내륜 결함 확인

    * 현재 단계: P-F 곡선 3단계

    * 열화 속도: 정상 범위 내, 가속 열화 미관찰

    * RUL 평가: ML 모델 예측 N시간, 에이전트 판정과 일관성 확인

    * Deep Research 결과: 과거 유사 사례에서 3단계 진입 후 약 Y일 내 기능 고장 발생 이력 존재. 정비 절차 참조.

    * 위험도: Warning

    * Memory에 5일차, 15일차 대비 위험도 증가 및 현재 단계 확인

    * 분석 리포트: 구조화된 Deep Research 리포트 발행

    * 작업 지시서: 구조화된 작업지시서 파일 생성

**시나리오 2: 급속 열화 대응**

* ID : [SC-004]

* 상황 : 설비에서 수집된 센서 데이터가 짧은 기간 내 급속 열화 패턴을 보이며, 비정상적 가속 열화 감지

* 목표 : 에이전트가 ReAct 전체 추론 + Deep Research 필수 수행을 통해 급속 열화 원인을 심층 탐색하고, Critical 긴급 정비 권고 및 리포트 생성.

* 위험도 : Critical

* 데이터셋 : Dataset #2, Bearing 1 - 외륜 결함 (약 7일간 급속 진행)

* 사전 조건 :

    * 센서 데이터 정상 실시간 수집 및 전처리

    * Edge 시스템이 이상 감지 결과 및 정량 분석 데이터를 이벤트 페이로드로 전달 (acceleration_detected = true)

    * Memory에 해당 설비의 이전 판단 이력 존재 (초기 정상 > 급속 변화)

* 상세 흐름

| 단계 | 사용자 행동        | 시스템 동작                                                                                                                                                                                           | 기술 구성요소                 | 비고                                                    |
| -- | ------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | ----------------------- | ----------------------------------------------------- |
| 1  | -             | 센서 데이터 실시간 수집 및 전처리                                                                                                                                                                              | Edge 시스템                | 실시간 스트리밍                                              |
| 2  | -             | 정량 분석 수행 후 이벤트 페이로드 생성                                                                                                                                                                           | Edge 시스템                | anomaly_detected = true, acceleration_detected = true |
| 3  | -             | Memory에서 해당 설비 이전 판단 이력 조회                                                                                                                                                                       | Memory (장기)             | 이전 정상/Watch 이력 확인 > 급속 변화 맥락 파악                       |
| 4  | -             | ReAct Thought 1: BPFO 진폭 지배적 상승, 사이드밴드 미약. 외륜 결함으로 판별                                                                                                                                            | ReAct + 도메인 지식          | 결함 유형 식별                                              |
| 5  | -             | ReAct Thought 2: RMS 급상승, Kurtosis 감소 경향. 도메인 지식 기준 "Kurtosis 감소 + RMS 급상승 = 말기 단계" 패턴 확인. Memory 대비 급속 진행 확인                                                                                    | ReAct + 도메인 지식 + Memory | "수일 내 1단계 > 4단계 급속 진행"                                |
| 6  | -             | ReAct Thought 3: acceleration_detected = true 열화 속도가 일반적 대비 비정상적으로 빠름. Deep Research 필수 발동                                                                                                       | ReAct + 도메인 지식          | 비정상 가속 > Deep Research 트리거                            |
| 7  | -             | Deep Research: search_equipment_manual로 "외륜 결함 급속 열화 조건" 검색 > 결과 해석 (고하중 조건에서 외륜 결함 급속 진행 가능성 확인) > 후속 질문 생성 > search_maintenance_history로 "유사 급속 열화 사례" 검색 > search_analysis_history로 과거 유사 분석 판단 이력 검색 > 과거 사례의 원인 및 결과 분석 > 필요시 추가 쿼리로 재검색 | Deep Research           | 검색 > 해석 > 후속질문 > 재검색 반복 루프                            |
| 8  | -             | ReAct Thought 4: ML RUL 예측값 확인. 가속 열화 상황이므로 신뢰구간 하한(보수적 추정)을 기준으로 판단. Memory의 이전 RUL 대비 급격한 감소 확인                                                                                                | ReAct + Memory          | 보수적 RUL 해석                                            |
| 9  | -             | ReAct Thought 5: 위험도 Critical 판정. Deep Research 결과를 반영한 긴급 정비 권고 생성. 외부 요인(과부하, 윤활 부족, 오염, 설치 불량) 개입 가능성 명시. 인간에게 운전 조건 변경 여부 추가 확인 요청                                                           | ReAct                   | 종합 판단                                                 |
| 10 | -             | 분석 리포트 생성: 추론 체인 + Memory 이력 + Deep Research 결과 + 보수적 RUL 해석을 포함한 긴급 리포트 작성                                                                                                                      | File Generation         | Critical > 긴급 리포트                                     |
| 11 | -             | Memory에 이번 판단 결과 저장 (외륜 결함 4단계, Critical, 급속 열화, 권고 내용)                                                                                                                                          | Memory (장기)             |                                                       |
| 12 | 긴급 알림 수신      | 분석 결과 UI 표시: 결함 유형, 단계, 상세 근거, 보수적 RUL 해석, 긴급 권고, 2차 손상 가능성, 불확실성 고지                                                                                                                             | -                       |                                                       |
| 13 | 에이전트 추론 과정 확인 | 각 Thought 단계별 추론 내용 및 Deep Research 탐색 과정 UI 표시                                                                                                                                                  | -                       |                                                       |
| 14 | 분석 리포트 다운로드   | 분석 리포트 파일 생성 및 제공                                                                                                                                                                                |                         |                                                       |
| 15 | 작업 지시서 다운로드   | 작업 지시서 파일 생성 및 제공                                                                                                                                                                                |                         |                                                       |

* 기대 출력

    * 결함 유형: 외륜(Outer Race) 결함. BPFO 지배적 상승, 사이드밴드 미약

    * 현재 단계: P-F 곡선 4단계(말기) - Kurtosis 감소 + RMS 급상승 패턴으로 충격에서 지속 진동으로 전이

    * 열화 속도: 비정상적 가속 열화. 수일 내 급속 진행으로 일반적 대비 극히 빠름

    * Deep Research 결과: 고하중 조건에서 외륜 결함 급속 진행 가능성 확인. 과거 유사 사례에서 급속 열화 시 Y일 내 기능 고장 발생

    * RUL 평가: ML 모델 예측 N시간, 가속 열화로 인해 신뢰구간 하한(보수적) 기준 M시간으로 판단

    * 위험도: Critical

    * 외부 요인 가능성: 과부하, 윤활 부족, 오염, 설치 불량 중 하나 이상의 외부 요인 개입 추정. 정비 담당자에게 운전 조건 변경 여부 확인 요청

    * 긴급 분석 리포트: 구조화된 긴급 정비 리포트 파일 생성

    * 작업 지시서: 구조화된 작업지시서 파일 생성

**시나리오 3: 대화형 상호 작용 - 정비 담당자 질의**

* ID : [SC-005]

* 상황 : SC-003/SC-004 분석 결과를 수신한 정비 담당자가 에이전트에게 질의

* 목표 : 에이전트가 현재 분석 맥락을 유지하며 정비 담당자의 질문에 응답. 정비 유예 가능 여부, 추가 원인 분석, 타 설비 상태 등에 대한 대화형 상호 작용

* 사전 조건 :

    * SC-003 또는 SC-004의 분석이 완료된 상태

    * Memory에 해당 분석의 전체 맥락 저장 완료

    * 정비 담당자가 대시보드에서 분석 결과를 확인한 상태

* 상세 흐름

| **단계** | **사용자 행동**          | **시스템 동작**                                                                         | **기술 구성 요소**                 | **비고**                 |
| ------ | ------------------- | ---------------------------------------------------------------------------------- | ---------------------------- | ---------------------- |
| 1      | "정비를 3일 유예할 수 있는가?" | Memory에서 현재 분석 맥락 로드. 전체 분석 결과가 아닌 구조화된 요약(결함 유형, 단계, 위험도, RUL, 핵심 근거)을 컨텍스트에 주입   | Memory + Prompt Optimization | 전체 추론 체인이 아닌 압축된 맥락 사용 |
| 2      | -                   | RUL 예측값과 열화 속도를 기반으로 유예 가능 여부 판단. 유예 시 위험도 변화 및 예상 시나리오 설명                         | ReAct + 도메인 지식               |                        |
| 3      | (대화 N턴 이상 지속 시)     | Prompt Optimization 자동 수행: 전체 대화 이력을 "분석 맥락 요약 + 최근 2~3턴 원문"으로 재구성하여 컨텍스트 윈도우 내 유지 | Prompt Optimization          | 슬라이딩 윈도우 + 요약 병행       |

* Prompt Optimization 전략

| **전략**    | **설명**                                                            | **적용 시점**  |
| --------- | ----------------------------------------------------------------- | ---------- |
| 분석 맥락 구조화 | Memory에서 전체 추론 체인 대신, 핵심 필드(결함 유형, 단계, 위험도, 핵심 근거)만 추출하여 컨텍스트에 주입 | 대화 세션 시작 시 |
| 대화 이력 압축  | 이전 턴 질문-응답 쌍을 핵심 결론 중심으로 요약                                       | 매 턴 누적시    |
| 슬라이딩 윈도우  | 최근 2-3턴은 원문 유지, 이전 턴은 요약으로 대체하여 컨텍스트 윈도우 효율적 적용                   | 대화 3턴 이상 시 |

* 기대 출력

    * 이전 분석 맥락을 유지한 상태에서 정비 담당자의 후속 질문에 근거 기반 응답

    * 대화가 길어져도 Prompt Optimization을 통해 응답 품질 저하 없이 일관된 맥락 유지

    * 새로운 정보 반영 시 분석 결과 동적 보완 및 Memory 업데이트

    * 정보가 없는 사항에 대해서는 추측하지 않고 "해당 정보가 없음"을 명시
